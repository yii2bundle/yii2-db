Контракты
===

## Общие правила именования полей, таблиц и схем

*  именовать в стиле [snack_case](https://ru.wikipedia.org/wiki/Snake_case)
*  именовать в единственном числе

Именовать в единственном числе необходимо для устранения избыточности имени. Ибо итак понятно, что сущностей в таблице много.

## Структура таблиц

Есть два варианта структуры БД

* плоская БД, где все таблицы находятся в одной схеме
* БД, разбитая на схемы

Для плоской БД, таблицы именуем, начиная с префикса предметной области.

Пример именования таблиц из предметных областей (пользователь, файловое хранилище, справочники):

* user_account
* user_role_assignment
* user_person
* storage_file
* storage_image
* storage_service
* storage_service_thumb
* reference_item
* reference_book
* reference_item_localization
* reference_book_localization

Для варианта с разбитием на схемы, каждую предметную область помещаем в отдельную схему.

Например:

* таблицы предметной области "пользователь", храним в схеме "user"
* таблицы предметной области "файловое хранилище", храним в схеме "storage"
* таблицы предметной области "справочники", храним в схеме "reference"

Вот что примерно должно получиться:

* user
	* account
	* role_assignment
	* person
* storage
	* file
	* image
	* service
	* service_thumb
* reference
	* item
	* book
	* item_localization
	* book_localization

> Note: Если БД позволяет использовать схемы, то разбивка по схемам более предпочтительна.

## Именование таблиц

* Таблица должна именоваться в единственном числе
* Промежуточным таблицам даем имена с префиксом `tie_` (например: `tie_role_account`)
  * Если БД не разбита на схемы, то сначала ставим префикс предметной области, затем префиск `tie` (например: `user_tie_role_account`)

## Именование полей

* поля, означающие время, именуются с постфиксом `_at` (например: `created_at`, `updated_at`, `publicated_at`)
* флаги именуются с префиксом `is_` (например: `is_readed`, `is_favorite`)
* поля, используемые для связи с другими таблицами, именуются с постфиксом `_id` (например: `user_id`, `company_id`)
	* обычно, имя связанного поля начинается с имени таблицы, затем ставится постфикс
	* но есть и исключения, например, "редактор новости" может именоваться как "editor_id", а ссылаться на таблицу `person`. Причина этому - в предметной области "новости" фигурирует понятие "редактор".
